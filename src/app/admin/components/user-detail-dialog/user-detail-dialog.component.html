<h1
  *ngIf="data.mode === 'edit'"
  mat-dialog-title
  translate="admin.user.userDetailHeadingEdit"
  [translateParams]="{ user: data.user.username }"
></h1>
<h1
  *ngIf="data.mode === 'add'"
  mat-dialog-title
  translate="admin.user.addUser"
  [translateParams]="{ user: data.user.username }"
></h1>

<div mat-dialog-content>
  <form [formGroup]="form">
    <mat-form-field>
      <mat-label translate="admin.user.username"></mat-label>
      <input matInput type="text" formControlName="username" />
    </mat-form-field>

    <mat-form-field>
      <mat-label translate="admin.user.password"></mat-label>
      <input
        matInput
        id="userDetailPassword"
        type="password"
        autocomplete="new-password"
        formControlName="password"
        [errorStateMatcher]="matcher"
      />
      <mat-hint translate="admin.user.passwordHint"></mat-hint>
      <mat-error *ngIf="form.hasError('passwordMatch')" translate="admin.user.passwordInvalid"></mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label translate="admin.user.confirmPassword"></mat-label>
      <input
        matInput
        id="userDetailConfirmPassword"
        type="password"
        autocomplete="new-password"
        formControlName="confirmPassword"
        [errorStateMatcher]="matcher"
      />
      <mat-hint translate="admin.user.passwordHint"></mat-hint>
      <mat-error *ngIf="form.hasError('passwordMatch')" translate="admin.user.passwordInvalid"></mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-chip-list #groupsChipList>
        <mat-chip *ngFor="let group of data.user.groups" [removable]="true" (removed)="removeGroup(group)">
          {{ group }}
          <mat-icon matChipRemove>cancel</mat-icon>
        </mat-chip>

        <input
          [placeholder]="'admin.user.groups' | translate"
          [matChipInputFor]="groupsChipList"
          [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
          matChipInputAddOnBlur="true"
          (matChipInputTokenEnd)="addGroup($event)"
        />
      </mat-chip-list>
      <mat-hint translate="admin.user.groupsHint"></mat-hint>
    </mat-form-field>
  </form>
</div>
<div mat-dialog-actions>
  <button mat-button mat-dialog-close translate="common.cancel"></button>
  <button
    mat-button
    translate="common.save"
    [mat-dialog-close]="save()"
    [disabled]="form.pristine || form.invalid"
    (click)="save()"
  ></button>
</div>
